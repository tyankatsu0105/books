# 対象読者の理解

ドキュメントを見る人はどんな人なのかを考える。

- 開発スキル
- エディタの種類
- 開発環境

読者に最低限必要な前提があれば、書く。

# 読者の想定

- どんな読者か
- なにを目的としてドキュメントを読むのか

# フリクションログ

フリクション（friction）とは、摩擦や抵抗のこと。転じて本書では、ソフトウェアやサービスの利用時にうまく使えなかったことや、違和感などを示している。

ユーザーの立場に立ってユーザーを邪魔するフリクションを自分で体験してみる。  
フリクションログは、ユーザーがソフトウェアを試すように、あなた自身がソフトウェアを試して体験を記録したログのこと。  
ログが貯まると、ドキュメントの改善ポイントであるということ。

# コードコメント

コードコメントもドキュメントの一部。  
開発者によっては、「コードコメントが不要となるように、コードを明確にすべきだ」という考えにより、コードコメントに異を唱える人もいる。  
コードからは読み取れない情報もあるので、そういうときにはコードコメントを書く。

> ドメイン情報とかはコードからは読み取れない。コードコメントを書くと保守するものが増えるので、極力コメント不要になる実装を心がけると良さそう。

# スタートガイド

# コンセプトドキュメント

サービスが「どのような技術で」ユーザーにサービスを提供しているのかを説明する。  
実装の詳細は避ける。

TODO app

```md
# コンセプト

Todo リストを追加するページ

## 追加

- タイトル
- 概要
- 詳細

を記入すると、

- タイトル
- 概要
- 詳細
- 作成日時

が保存される。

## 必須項目

- タイトル
- 概要

## バリデーション及びエラーメッセージ

- タイトル
  - 未入力
    - 必須項目です
  - 51 文字以上
    - 0~50 文字まで入力が可能です
```

# リファレンスドキュメント

行動とその結果を説明する。

## API リファレンス

- すべてのリソースとエンドポイントに対する詳細なリファレンスが提供されている
- 豊富な例が提供されている
- ステータスコードとエラーメッセージが定義され、リストアップされている

## 用語集

開発にあたって知って置かなければならない用語と説明を書く。  
外部リンクははらないことを推奨。リンク先の情報の鮮度に依存してしまうため。

# タイトルとゴール

- 読み手
- 目的
- コンテンツパターン

から設定する。  
タイトルはユーザーから見たドキュメントの目的を、いちばん短くかつ明確にいい換えたフレーズにすること。
ゴールはタイトルからわかるので、ゴールは一つに絞る。ゴールが複数あるなら分ける。

# アウトライン

- 追記すべき事前情報や設定情報はあるか？
  - 前提条件
- 飛ばしている手順や、説明が不完全な手順はないか？
- 手順は合理的な順で並んでいるか？
  - 流れ
  - 正しいタイミングで読者に情報を提供する

# ドラフト

アウトラインを書いたらコンテンツのドラフトを書く。

## 見出し

一貫性を保つ。あるタスクを完了させるための手順書であるならば、見出しをすべて動詞で終える。  
大規模なドキュメントの一部を書いているなら、見出しとスタイルを他のドキュメントと合わせる。

> 統一されていると読むストレスが減るからかな

## 段落

5 個以下に収める。短いとモバイルでも読みやすい。

## 手順

番号付きのリストがおすすめ。  
1 手順で 1 行動。複数の行動を 1 手順に含めると、脱落しやすくなる。  
手順が完了した状態を示す。

## リスト

項目の羅列は、

- よく使うものから使わないものの順に並べる
- アルファベット順に並べる

など、なにか規則を持つといい。

リスト項目が 10 以上になると、流し読みが辛いので、小さいリストに分割する

## コールアウト

比較的重要な補足だが、流れにそぐわないものが存在する。  
見逃すべきでない情報はコールアウトにする。

```md
ヒント：関連情報や、今読んでいることに関するヒントです。

警告：実行しないでください！危険な状態に陥るかもしれません。個人情報が危機にさらされたり、システムが回復不可能なダメージを受けたり、損失を被ったりするかもしれません。

注意：注意深く進んでください。ある行動によって、予期せぬ結果が起こるかもしれません。
```

# 読者は流し読みをする

書いてある内容をほとんど読まない。  
代わりにタイトルと見出しを流し読みする。  
流し読みしても、読者が目的の情報にたどり着けるようにする。

## 重要な情報を最初の数段落に込める

読者に読まれやすい冒頭で、ドキュメントのゴールの要約を書く。

## 長文を避ける

長文は読まれないので、

- リスト
- サンプルコード
- グラフィック

に分割する。

## 簡潔かつ明確に

タイトルやフォーマットは簡潔かつ明確に。  
書きたくなった他の情報は別のドキュメントに。

## 最初から完璧に書かない

徐々に磨き上げていけばいいので、加筆していく前提でドラフトを書けばいい。
情報が不足している場合は todo とすればいい。

# テンプレートを作る

似たようなドキュメントがあるなら、テンプレートを作る。  
一貫したドキュメントを作ることができる。  
今後のドキュメント作成の効率化にもつながる。

# 執筆と編集を分ける

執筆と編集を同時にすると、個別にするよりも遅くなる。  
それぞれ別で行うことで、見方が変わって新たな視点でドキュメントを見ることができる。そして編集を繰り返していく。

## ドキュメントの周回では観点を絞る

いろいろな要素を見直していると、扱う対象が多すぎて編集が進まない。

- 技術的な観点
- 完全性
- 構成
- 明確さと簡潔さ

の観点の順番で編集すると、ユーザーが求めるドキュメントに近づけられる。

## 初見の気持ちで

あたかも初見であるかのようにドキュメントを見る。  
慣れ親しんだ情報を取り扱っていると、それを知らない人にとって重要な情報を軽視してしまう。

## 用語の統一

意味が一貫するように統一し、用語の不一致をなくす

## 情報不足

情報が足りなさすぎると、読者は離脱しやすい。  
読み手が必要とする情報かつ、多すぎて見つけられない情報量にならないようにする。

## プラッシング

「建設的な追加提案ができるなら、アイデアの批判を行っていい」という方法。ピクサーがやってる。  
「ここが不明瞭なので、こうするのはどうですか？」みたいな。  
気に入った部分を伝えてもいい。他の人もその流れに続く。

# サンプルコード

文章とサンプルコードは違う。機能のデモにはサンプルコードだと理解が得られやすい。  
有益で保守可能である必要がある。

## サンプルコードの種類

- 説明用
  - なにかを説明するためのコード
  - とある実装が出力した json コードとか
- 実行可能
  - 実行可能なコード
  - shell command とか

## いいサンプルコード原則

### 説明用

1. 説明されていること

- コードのそばに説明が表示されている
  - コードを動かすための制約
- 何かを出力するコードであれば、出力結果を表示する
- 長いコードには、コード内にインラインコメントを書く

2. 簡潔であること

- 読み手が必要とする過不足ない情報
- 大きなコードは分割する

3. 明確であること

- 慣習に習ったコード形式
-

### 実行可能

1. 利用可能であり、拡張可能

- サンプルの使い方と、そのコードを入力すべき場所が明確
- コードの一部を変えて使ってもらいたい場合は、わかりやすい命名にする
  - `sh login-application <your-address> <your-password>`

2. 信頼できる

- ペースト可能であり、動作し、余計なことを実行しない
- 実行可能なコードであり続けるために、定期的にメンテナンスする

## サンプルコード設計

読者が初心者であれば、丁寧にコードを書く。  
熟練の読者であれば、より複雑な例に着目してコードを書く。  
初心者向けとそうでない者を混同したドキュメントを書かないこと。

## サンプルコードの自動生成

OpenAPI なんかはサンプルコードを自動生成できる

# ビジュアルコンテンツは記憶に残る

画像があると、情報の 65%を思い出せる。

# ビジュアルコンテンツはメインではない

メインは文字による情報であって、ビジュアルコンテンツは補助。  
理解を促進する以外は邪魔になる。

# 悪いビジュアルコンテンツの特徴

- 理解容易性
  - 情報設計が悪いと興味が失せ、混乱を招く
- アクセシビリティ
  - 代替テキストがなければスクリーンリーダーで無意味な画像になる
- パフォーマンス
  - 画像の読み込みに懸念が出るサイズの画像

# 画像化を避けるべき情報

IP アドレスやサンプルコードのような、コピペして使う事が多い情報は文字にするべき。画像だとそれができなくなる。

# ドキュメントに役立つ図

- ボックスと矢印
  - エンティティ間の流れを表現できる
  - 矢印が交差しないようにする
  - 矢印が片方か双方かわかるようにする
- フローチャート
  - 最初から最後までガイド可能
  - 文字は大きく
  - 形は同じものを使う
- スイムレーン
  - それぞれのアクターやコントリビューターに独自のレーンを作る
  - 複数のレーンで時系列でフローを作れる

# 図に込めるアイデア量は 1 つ

不要な詳細は取り除くことで、図の真意を際立たせる。  
物事をシンプルにするためには、複数の図を使ってもいい。

# Time to Hello World

言語学習者が「Hello World」を出力できるまでにかかった時間。  
つまり「ドキュメントに書いてある内容で、API やアプリケーションを動かすまでにかかった時間」のこと。  
短いほどいい。

# ドキュメントの読みやすい構造

## サイトナビゲーションを意識する

3 つのアーキテクチャによって

- ユーザーがサイトを巡回
- 書き手がページを追加

するための一貫性のあるモデルを作れる。  
3 つを組み合わせることで理にかなったアーキテクチャになるはず。

### シーケンス

順番。アルファベットや利用手順など、一貫性のあるテーマで順番を意識する。

### 階層

広いトピックから狭いトピックへ階層構造になる。子らをサブトピックとも言う。  
1 つのメイントピックは複数のサブトピックで構成されている。

### Web

すべてが相互接続されている構造。階層はない。

## ランディングページ

適切なコンテンツへと導くページ。

> ライブラリのドキュメントのトップに有るようなもの

## 導く方向を限定する

いろいろな方向に読者を導けてしまうと、かえって混乱を招く。  
読者が何をしたいのかを考えて、その方向に導く。

# 既存コンテンツを評価し、コンテンツギャップを埋める

- このページは役に立っているか
- 最新化されているか
- 適切な位置に配置されているか

を問い、

- そのまま
- 削除する
- 正確性をレビューする
- 他のドキュメントと合流する
- 複数のドキュメントに分割する

といったアクションを行う。  
その上で「読者は欲しがっていたけど書いていない情報はなかったか？」を問う。それがコンテンツギャップなので、執筆に役立てる。

# ドキュメントを保守する

機能に対してドキュメントが存在していることを認知し、機能に変更があるとドキュメントを変更することを怠らないようにする。  
Kubernates はスプレッドシートでドキュメントを管理している。  
機能に対してドキュメントが存在していることを管理することで、ドキュメントの保守を行っている。

# ドキュメントの責任者を決める

ドキュメントの責任は全員にある = 全員に責任がない  
責任者を決めることで、ドキュメントが古くなるのを防ぐ。

# ドキュメントの保守を称賛する

保守派根気がいる作業なので、労力に報いることが大切。  
ドキュメントに時間をかけることは大切なことなので、ペナルティを課してはいけない。

# ドキュメントの鮮度を確認する

Google では、一定期間ドキュメントが更新されていなければ、責任者に連絡が届くようにしている。  
そのためにドキュメントに日付情報を組み込んでいる

# リンクチェッカー

ドキュメント内のリンク切れを検証する。CI に組み込むと便利。
